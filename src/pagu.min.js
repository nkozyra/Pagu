var Pagu=function(e,a){"use strict";var r=this;r.obj=e,r.template=a,r.parsed=a,this.escapeRegexp=function(e){return new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"gm")},this.Pagu=function(e,a){var p=e?e:r.obj,n=a?a:r.parsed;for(var g in p)if(p.hasOwnProperty(g)){p[g]&&"[object Function]"==={}.toString.call(p[g])&&(p[g]=p[g]());for(var c=new RegExp("{{"+g+"\\.if}}(.*?){{/"+g+"\\.if}}","gm"),l=c.exec(n);null!=l;){var t=l[1],i=r.escapeRegexp(l[0]);n=p[g]?n.replace(i,t):n.replace(i,""),l=c.exec(n)}var o=new RegExp("{{"+g+"\\.(is|!is)\\((.*?)\\)}}(.*?){{/"+g+"\\.(\\1)}}","gm");console.log("pat: "+o);for(var s=o.exec(n);null!=s;){var x="!is"===s[1]?!1:!0,u=s[2],v=new RegExp(s[0].replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"gm");console.log(v);var f="";u==p[g]===x&&(f=s[3]),n=n.replace(v,f),s=o.exec(n)}var m=new RegExp("{{"+g+"}}","gi");if(n=n.replace(m,p[g]),p[g]instanceof Array){var R="{{"+g+".empty}}(.*?){{/"+g+".empty}}",w=new RegExp(R,"gim");console.log(R),n=p[g].length<1?n.replace(w,"$1"):n.replace(w,"");for(var E="{{"+g+".each}}(.*?){{/"+g+".each}}",h=".*?"+E+".*",$=new RegExp(E,"gim"),d=new RegExp(h,"gim"),P=n.replace(d,"$1"),y="",b=0;b<p[g].length;b++)y+=r.Pagu(p[g][b],P);n=n.replace($,y)}}var j=new RegExp("{{([A-Za-z_0-9])+..*?}}(.*?){{/\\1.*?}}","gm");n=n.replace(j,"");var A=new RegExp("{{([A-Za-z_0-9])+}}","gm");return n=n.replace(A,""),r.parsed=n,r.parsed},this.parse=function(){return r.parsed},r.Pagu()};